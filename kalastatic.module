<?php

/**
 * Implementation of hook_menu().
 */
function kalastatic_menu() {
  $items = array();

  $items['kalastatic/drupal-css'] = array(
    'title' => 'Drupal CSS',
    'description' => 'Return an array of information about the css being added to the page',
    'page callback' => 'kalastatic_asset_json',
    'page arguments' => array('css'),
    'access arguments' => array('access content'),
  );

  $items['kalastatic/drupal-js'] = array(
    'title' => 'Drupal Javascript',
    'description' => 'Return an array of information about the js being added to the page',
    'page callback' => 'kalastatic_asset_json',
    'page arguments' => array('js'),
    'access arguments' => array('access content'),
  );
  
  return $items;
}

/**
 * Return json formatted info about the css being added to the page.
 */
function kalastatic_asset_json($type){
  switch ($type){
    case 'css':
      $assets = drupal_add_css();
      break;  
    
    case 'js':
      $assets = drupal_add_js();
      break;
  }
  
  return drupal_json_output($assets);
}
